function [ network ] = buildNetwork( HiddenLayer, epochs, dataSplit, x, y, perf,  lr)

    [ network ] = feedforwardnet( HiddenLayer, 'trainlm' );
    [ network ] = configure( network, x, y );

    network.trainParam.epochs = epochs;
    network.trainParam.lr = lr;
    network.divideMode = 'sample';
    network.performFcn = 'sse';
    network.divideParam.trainRatio = dataSplit(1);
    network.divideParam.valRatio = dataSplit(2);
    network.divideParam.testRatio = dataSplit(3);
    
    for i=1:length(HiddenLayer)
        network.layer 
    end

    [ network ] = train( network, x, y);

end

